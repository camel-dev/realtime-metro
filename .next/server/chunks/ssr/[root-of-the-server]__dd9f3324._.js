module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},56704,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-async-storage.external.js",()=>require("next/dist/server/app-render/work-async-storage.external.js"))},32319,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/work-unit-async-storage.external.js",()=>require("next/dist/server/app-render/work-unit-async-storage.external.js"))},20635,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/action-async-storage.external.js",()=>require("next/dist/server/app-render/action-async-storage.external.js"))},24725,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/after-task-async-storage.external.js",()=>require("next/dist/server/app-render/after-task-async-storage.external.js"))},43285,(a,b,c)=>{b.exports=a.x("next/dist/server/app-render/dynamic-access-async-storage.external.js",()=>require("next/dist/server/app-render/dynamic-access-async-storage.external.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},51234,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"HandleISRError",{enumerable:!0,get:function(){return e}});let d=a.r(56704).workAsyncStorage;function e({error:a}){if(d){let b=d.getStore();if(b?.isStaticGeneration)throw a&&console.error(a),a}return null}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},40622,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return h}});let d=a.r(87924),e=a.r(51234),f={fontFamily:'system-ui,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji"',height:"100vh",textAlign:"center",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},g={fontSize:"14px",fontWeight:400,lineHeight:"28px",margin:"0 8px"},h=function({error:a}){let b=a?.digest;return(0,d.jsxs)("html",{id:"__next_error__",children:[(0,d.jsx)("head",{}),(0,d.jsxs)("body",{children:[(0,d.jsx)(e.HandleISRError,{error:a}),(0,d.jsx)("div",{style:f,children:(0,d.jsxs)("div",{children:[(0,d.jsxs)("h2",{style:g,children:["Application error: a ",b?"server":"client","-side exception has occurred while loading ",window.location.hostname," (see the"," ",b?"server logs":"browser console"," for more information)."]}),b?(0,d.jsx)("p",{style:g,children:`Digest: ${b}`}):null]})})]})]})};("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},28382,a=>{"use strict";var b=a.i(87924),c=a.i(72131);function d({onSidebarToggle:a}){return(0,b.jsx)("nav",{style:{padding:16,background:"#fff",borderBottom:"1px solid #eee",display:"flex",alignItems:"center"},children:(0,b.jsxs)("button",{onClick:a,"aria-label":"노선 선택!",style:{background:"#0052A4",color:"#fff",border:"none",borderRadius:8,padding:"8px 18px 8px 44px",fontSize:16,fontWeight:600,cursor:"pointer",position:"relative",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.07)",marginRight:16,transition:"background 0.2s"},onMouseOver:a=>a.currentTarget.style.background="#003c7a",onMouseOut:a=>a.currentTarget.style.background="#0052A4",children:[(0,b.jsx)("span",{style:{position:"absolute",left:18,top:"50%",transform:"translateY(-50%)",width:18,height:18,display:"inline-block"},children:(0,b.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",children:[(0,b.jsx)("rect",{y:"3",width:"18",height:"2.5",rx:"1.2",fill:"#fff"}),(0,b.jsx)("rect",{y:"8",width:"18",height:"2.5",rx:"1.2",fill:"#fff"}),(0,b.jsx)("rect",{y:"13",width:"18",height:"2.5",rx:"1.2",fill:"#fff"})]})}),"노선 선택!"]})})}let e={1:"#0052A4",2:"#009D3E",3:"#EF7C1C",4:"#00A5DE",5:"#996CAC",6:"#CD7C2F",7:"#747F00",8:"#E6186C"},f=Object.keys(e).map(a=>({name:`${a}호선`,color:e[a],short:a}));function g({open:a,onClose:c,onSelectLine:d}){return a?(0,b.jsxs)("aside",{style:{position:"fixed",left:0,top:0,width:270,height:"100vh",background:"#f7f9fb",zIndex:1e3,padding:28,boxShadow:"2px 0 16px 0 rgba(0,0,0,0.07)",overflowY:"auto",fontFamily:"Pretendard, sans-serif"},children:[(0,b.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:28},children:[(0,b.jsx)("h3",{style:{margin:0,fontSize:22,fontWeight:700,color:"#222"},children:"서울 지하철 노선"}),(0,b.jsx)("button",{onClick:c,"aria-label":"닫기",style:{background:"none",border:"none",fontSize:28,cursor:"pointer",color:"#888",lineHeight:1,padding:0},children:"×"})]}),(0,b.jsx)("ul",{style:{listStyle:"none",padding:0,margin:0},children:f.map(a=>(0,b.jsxs)("li",{onClick:()=>{d(a.short),c()},style:{cursor:"pointer",margin:"10px 0",display:"flex",alignItems:"center",borderRadius:10,padding:"8px 12px",transition:"background 0.15s",fontWeight:500,fontSize:16,userSelect:"none",boxShadow:"0 1px 2px rgba(0,0,0,0.03)"},onMouseOver:a=>a.currentTarget.style.background="#e6eef7",onMouseOut:a=>a.currentTarget.style.background="transparent",children:[(0,b.jsx)("span",{style:{display:"inline-flex",alignItems:"center",justifyContent:"center",width:32,height:32,borderRadius:"50%",background:a.color,color:"#fff",fontWeight:700,fontSize:16,marginRight:14,border:"2px solid #fff",boxShadow:"0 2px 8px 0 rgba(0,0,0,0.10)",textAlign:"center",lineHeight:1},children:a.short}),(0,b.jsx)("span",{style:{letterSpacing:.5},children:a.name})]},a.short))})]}):null}let h={1:"/realtime-metro/img/line1_v4.png",2:"/realtime-metro/img/line2_v4.png",3:"/realtime-metro/img/line3_v4.png",4:"/realtime-metro/img/line4_v4.png",5:"/realtime-metro/img/line5_v4.png",6:"/realtime-metro/img/line6_v4.png",7:"/realtime-metro/img/line7_v4.png",8:"/realtime-metro/img/line8_v4.png"},i={1:"#0052A4",2:"#00A84D",3:"#EF7C1C",4:"#00A2D1",5:"#996CAC",6:"#CD7C2F",7:"#747F00",8:"#E6186C"};function j({selectedLine:a}){let[d,e]=(0,c.useState)(1),f=(0,c.useRef)(null),[g,j]=(0,c.useState)({width:1,height:1}),k=(0,c.useRef)(null),l=(0,c.useRef)(null);(0,c.useEffect)(()=>{if(!k.current)return;let a=()=>{j({width:k.current.width,height:k.current.height})};return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[a]);let[m,n]=(0,c.useState)([]);(0,c.useEffect)(()=>{if(!a)return;let b=async()=>{try{let b=`${a}호선`,c=await fetch(`https://metro.jys5540.workers.dev/?line=${b}`),d=await c.text(),e=new DOMParser().parseFromString(d,"text/xml"),f=Array.from(e.getElementsByTagName("row")).map(a=>({trainId:a.getElementsByTagName("trainNo")[0]?.textContent??"",statnNm:a.getElementsByTagName("statnNm")[0]?.textContent??"",statnTnm:a.getElementsByTagName("statnTnm")[0]?.textContent??"",updnLine:a.getElementsByTagName("updnLine")[0]?.textContent??"",directAt:a.getElementsByTagName("directAt")[0]?.textContent??"",trainSttus:a.getElementsByTagName("trainSttus")[0]?.textContent??""})),g=new Map;f.forEach(a=>{let b=`${a.trainId}-${a.statnNm}`;g.has(b)||g.set(b,a)});let h=Array.from(g.values());console.warn(h),n(h)}catch(a){n([])}};b();let c=setInterval(b,5e3);return()=>clearInterval(c)},[a]);let[o,p]=(0,c.useState)([]);return((0,c.useEffect)(()=>{"1"===a?fetch("/realtime-metro/line1_all_station_coords_updated.json").then(a=>a.json()).then(p):p([])},[a]),a&&h[a])?(0,b.jsx)("div",{ref:l,style:{width:"100vw",height:"calc(100dvh - 56px)",overflow:"auto",position:"relative",background:"#fafbfc"},onTouchStart:a=>{if(1===a.touches.length);else if(2===a.touches.length){let b=a.touches[0].clientX-a.touches[1].clientX,c=a.touches[0].clientY-a.touches[1].clientY;f.current={distance:Math.sqrt(b*b+c*c),scale:d}}},onTouchMove:a=>{if(1===a.touches.length);else if(2===a.touches.length&&f.current){let b=a.touches[0].clientX-a.touches[1].clientX,c=a.touches[0].clientY-a.touches[1].clientY,d=Math.sqrt(b*b+c*c);e(Math.max(.5,Math.min(3,f.current.scale*(d/f.current.distance))))}},onTouchEnd:a=>{f.current=null},children:(0,b.jsxs)("div",{style:{position:"relative",width:`${1200*d}px`,height:`${800*d}px`},children:[(0,b.jsx)("img",{ref:k,src:h[a],alt:`${a}호선 노선도`,style:{width:"100%",height:"100%",boxShadow:"0 4px 24px #0001",borderRadius:16,userSelect:"none",display:"block",cursor:"default"},draggable:!1,onLoad:()=>{k.current&&j({width:k.current.naturalWidth,height:k.current.naturalHeight})},onClick:a=>{let b=a.currentTarget.getBoundingClientRect(),c=a.clientX-b.left,e=a.clientY-b.top,f=l.current?.scrollLeft??0,g=l.current?.scrollTop??0;console.log(`x: ${Math.round((c+f)/d)-1}, y: ${Math.round((e+g)/d)-1}`)}}),m.map(e=>{let f=o.filter(a=>"구로"===a.name?a.name===e.statnNm:a.name===e.statnNm&&a.trainSttus===e.trainSttus&&a.updnLine===e.updnLine);if(0===f.length)return null;let g=f[0],h=g.x*d,j=g.y*d,k=0,l=0;"2"!==a&&(["시청","서울","남영","용산","도봉산","도봉","방학","창동","녹천","월계","광운대","석계","가산디지털단지","독산","관악","안양","명학","금정","동암","간석","주안","도화"].includes(e.statnNm)?"0"===e.updnLine?k=-10:"1"===e.updnLine&&(k=13):"0"===e.updnLine?l=-5:"1"===e.updnLine&&(l=10));let m=h+k,n=j+l,p=i[a]||"#43a047",q="",r=p;"2"===a?"0"===e.updnLine?(q="↺",r=p):"1"===e.updnLine&&(q="↻",r=p):"0"===e.updnLine?(q="▲",r="#EF7C1C"):"1"===e.updnLine&&(q="▼",r="#00A2D1");let s="1"===e.directAt||"7"===e.directAt,t=`${e.trainId}-${e.statnNm}`;return(0,b.jsx)(c.default.Fragment,{children:(0,b.jsx)("div",{style:{position:"absolute",left:m-10,top:n-7,width:20,height:14,pointerEvents:"none",zIndex:2,display:"flex",alignItems:"center",justifyContent:"center"},title:e.trainId,children:(0,b.jsxs)("div",{style:{width:30,height:10,background:"rgba(255,255,255,0.7)",borderRadius:"10px 10px 10px 10px / 16px 16px 16px 16px",border:s?"1px solid #e53935":`1px solid ${p}`,boxShadow:"0 2px 8px #0002",position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,b.jsxs)("span",{style:{fontSize:5,color:s?"#e53935":p,fontWeight:900,whiteSpace:"nowrap",textShadow:"0 2px 4px #fff",display:"flex",alignItems:"center"},children:[e.statnTnm,(0,b.jsx)("span",{style:{marginLeft:1,fontSize:5,fontWeight:"bold",color:r},children:q})]}),(0,b.jsx)("div",{style:{position:"absolute",left:2,bottom:-3,width:3,height:3,background:"#bbb",borderRadius:"50%"}}),(0,b.jsx)("div",{style:{position:"absolute",right:2,bottom:-3,width:3,height:3,background:"#bbb",borderRadius:"50%"}})]})})},t)})]})}):(0,b.jsx)("div",{style:{textAlign:"center",marginTop:100,color:"#888"},children:"노선을 선택하세요."})}function k({children:a}){let[e,f]=(0,c.useState)(!1),[h,i]=(0,c.useState)("1");return(0,b.jsx)("html",{lang:"en",children:(0,b.jsxs)("body",{style:{margin:0,overflow:"hidden"},children:[(0,b.jsx)("div",{style:{position:"fixed",top:0,left:0,width:"100vw",zIndex:100,height:56,background:"#fff"},children:(0,b.jsx)(d,{onSidebarToggle:()=>f(!0)})}),(0,b.jsx)(g,{open:e,onClose:()=>f(!1),onSelectLine:a=>{i(a)}}),(0,b.jsx)("div",{style:{transition:"padding-left 0.3s",paddingLeft:290*!!e,minHeight:"100dvh",boxSizing:"border-box",background:"#f5f6fa",paddingTop:56},children:(0,b.jsx)(j,{selectedLine:h})})]})})}a.s(["default",()=>k],28382)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__dd9f3324._.js.map